<!DOCTYPE html>
<html>
<head>
	<title>布置个人作业</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="../../css/shijian.css">
	<link rel="stylesheet" type="text/css" href="../../css/common.css">
	<style type="text/css">
		
        .decorate{
        	
        	color: #008000;
            background-color: #fff;
            height: 24px;
            line-height: 24px;
            width: 110px;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            /*margin-top: 4px;*/
            margin-bottom: 4px;
            margin-left: 4px;
        }

            
            /*时间选择*/
            .box{
                text-align: center;
            }

            .jsbox{
                max-width: 500px;
                text-align: left;
                margin: 0 auto;
            }
            #selectTime{
                background-color: rgba(136,200,155,1);
                border: 0px;
                text-align: center;
                color: #fff;
                width: 100%;
                line-height: 30px;
                height: 30px;
                margin-top: 4px;
            }
           .cell1{
            width: 4%;
           }
           .cell2{
            width: 6%;
           }
           .cell3{
            width: 24%;
           }
           .cell4{
            width: 10%;
           }
           .cell5{
            width: 12%;
           }
           .cell6{
            width: 8%;
           }
           .cell7{
            width: 4%;
           }
           .cell8{
            width: 10%;
           }

           /*.cell9{
            width: 8%;
           }*/
           .cell10{
            width: 6%;
           }
           .cell11{
            width: 6%;
           }

           .cell12{
            width: 10%;
           }
          /* .cell13{
            width: 10%;
           }*/
           .serial{
            display: inline-block;
           }
           .che{
            margin-left: 12px;
           }
           .trline{
            height: 40px;
            margin-top: 3px;
            box-sizing: border-box;
             line-height: 45px;
           }
            
              /*弹出层*/
           /* .mask{
                position: absolute;
                top: 0px;
                bottom: 0px;
                left: 0px;
                right: 0px;
                background-color: rgba(0,0,0,0.4);
                display: none;
            }
            .lists{
                position: absolute;
                top: 350px;
                right: 200px;
                width: 160px;
                height: 330px;
                background-color: #fff;
                padding-top: 10px;
                padding-bottom: 10px;
                border-radius: 5px;
            }
            .lists>li{
                line-height: 26px;
            }
            .lists>li>input{
                float: left;
                margin-left: 30%;
                margin-top: 8px;
                margin-right: 6px;
            }
            .triangle_border_right{
                width:0;
                height:0;
                border-width:14px 0 14px 14px;
                border-style:solid;
                border-color:transparent transparent transparent #fff;
                margin:40px auto;
                position: absolute;
                top: 310px;
                right: 189px;
            }
            .triangle_border_right span{
                display: block;
                width: 0;
                height: 0;
              
                position: absolute;
               
            }*/
            .che .input_che:checked+span:after {
                top: -8px;
            }
            .bg-line{
                bottom: 0px;
            }
         
       /* .mask_sure{
            background-color: #5FB878;
            line-height: 26px;
            width: 50px;
            border-radius: 4px;
            text-align: center;
            color: #fff;
            position: absolute;
            bottom: 4px;
            right: 56px;
            cursor: pointer;
        }
        */
        /*.classes{
            background-color: #48D1CC;
        }
        .classes p{
            text-align: center;
            line-height: 30px;
            color: #fff;
        }
        .classes input{
            width: 99%;
            border: 1px solid #999;
            line-height: 30px;
            text-align: center;
            background-color: #48D1CC;
            color: #fff;
        }*/
        .chosec2{
            margin-bottom: 10px;
        }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button{                -webkit-appearance: none !important;            }
	</style>
</head>
<body>
    <div class="container">
    	<div class="nav">
    		<div class="logos lf">
    			<img src="../../img/120.gif">
    			<span>启思教育</span>
    		</div>
            <div class="homes" onclick="C.rotateImg()">
                <img class="" src="../../img/home.png">
            </div>
    		<div class="con_title">英语阅读宝</div>
    		<div class="operation rf">
    			<div class="ope_first lf">
    				<img src="../../img/120.png">
    				<span>张三</span>
    				<!-- <img src="../../img/homework/u2104.png" class="tags"> -->
    				<ul class="message_list">
    					<li>
    						<a href="#">基本资料</a>
    					</li>
    					<li>
    						<a href="#">安全设置</a>
    					</li>
                         <li>
                            <a href="#">消息中心</a>
                        </li>
    				</ul>
    			</div>
    			<div class="exit lf">
    				<a href="../../index.html">退出</a>
    			</div>
    		</div>
    		<div class="leafbg">
    			<img src="../../img/homework/u1884.gif">
    		</div>
    	</div>
        <div class="mainContent">
        	
            <div class="cenContent">
                <div class="main">
                <div class="mainleft">
                    <ul class="nav_list">
                        <li><a href="homework.html">布置作业</a> </li>
                        <li class="navactive">
                            <a href="personal.html">个人作业</a>            
                        </li>
                        <li><a href="result.html">成绩统计</a></li>
                        <li><a href="read.html">阅卷</a></li>
                        <li><a href="were.html">错题库</a></li>
                        <li><a href="assessment.html">评估</a></li>
                        <li><a href="management.html">班级管理</a></li>
                        <li><a href="../buy/buy.html">更多篇章</a></li>
                    </ul>
                </div>
                <div class="maincenter">
                    
                    <div class="cen_content">
                        <div class="task_list">查看已布置任务</div>
                        <div class="decorate">布置班级作业</div>
                        <div class="skip">
                            <input type="number" name="skip" min="0">
                            <p class="allcount">共<span></span>页</p>
                            <div class="skipBtn">跳转</div>
                        </div>
                        <!-- 表格 -->
                        <ul class="tablelist"></ul>
                        <!-- 页码 -->
                        <div class="count">1</div>
                         <!-- 发布任务 -->
                        <div class="release">发布任务</div>
                        <!-- 左右翻页 -->
                        <div class="left_btn">
                            上一页
                            <!-- <img src="../../img/homework/u1878.gif"> -->
                        </div>
                        <div class="right_btn">
                            下一页
                            <!-- <img src="../../img/homework/u1879.gif"> -->
                        </div>
                    </div>
                </div>
                <div class="mainright">
                    <div class="seleclasses">
                        <p>选择班级</p>
                            <input type="text" class="selectNum" value="未选择">
                    </div>
                    <div class="choose">
                            
                            <div class="chosec  cholast">
                                <p>选择学期</p>
                                <p class="selSemester ">未选择</p>
                            </div>
                            <div class="chosec  chosec2">
                                <p>选择单元</p>
                                <P class="selUnit">未选择</P>
                            </div>
                            <div class="chosec chosec1" >
                                <p id="times-1">选择布置日期</p>
                                <div class="box">
                                    <input type="text"  id="selectTime" placeholder="未选择" />
                                    
                                </div>
                            </div>
                            <div class="chosec">
                                <div class=" chofir">
                                    <p>限时</p>
                                    <p class="chofirTime">未选择</p>
                                </div>
                                
                            </div>
                            
                        </div>
                    <div class="tarskName">
                        <p>任务名称</p>
                        <input type="text" name="tarskName" value="未选择">
                    </div>
                    <div class="seletstu">
                        <p>选择学生</p>
                        <input type="text" class="selectstuNum" value="未选择">
                    </div>
                </div>
            </div>
            </div>
            <div class="bg-line">
                <!-- <a href="../buy/buy.html"><img src="../../img/buy.png"></a> -->
            </div>    
        </div>
    </div>
    <div class="mask">
       <div class="maskflex">
            <div class="lists">
                <span class="close_list">×</span>
                <div class="listTimes">
                    <label>时间：</label>
                    <input type="number" name="time" maxlength="3">

                    <p>*时间单位：分钟</p>
                </div>
                <div class="tarskSetName">
                    <label>名称：</label>
                    <input type="text" name="tarskname">
                </div>
                 <ul class="semester">
                    
                </ul>
                <ul class="classSec"></ul>
                <ul class="stuSec"></ul>
                <ul class="unit"></ul>
                <p class="mask_sure">确定</p>
            </div>
       </div>
    </div>
    <div id="pop-box"></div>
    <div class="layerMask"></div>
    <div class="loading">
        <div class="loadBox">
            <div class="spinner"></div>
            <p>加载中，请稍后。。。</p>
        </div>
    </div>
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/laydate.js"></script>
    <!-- <script type="text/javascript" src="../../js/jquer_shijian.js"></script> -->
    <script type="text/javascript" src="../../js/request.js"></script>
    <script type="text/javascript" src="../../js/subject.js"></script>
      <script type="text/javascript" src="../../js/common.js"></script>
    <script type="text/javascript">
    	$(function () {
    		// $("#selectTime").shijian({
      //           // y:-20,//当前年份+10
      //           Hour:false,//是否显示小时
      //           Minute:false,//是否显分钟
      //       })
            laydate.render({
               elem: '#selectTime' //指定元素
               ,min:0
            });
            var paramClass={
                "IndexPage": 1,
                "IndexSize":100
            }
            var srtudent={
                "IndexPage":1,
                "IndexSize":9
            }
            var pertarsk={
                'type':1,
                'courseId':0
            }
            var param={
                "IndexPage":1,
                "IndexSize":10
            };
             var Vparams={
                'IndexPage':1,
                'IndexSize':1
            };
            if(localStorage.getItem('teacherNames')){
                $(".ope_first").find('span').text(localStorage.getItem('teacherNames'));
             }
              var gradeid=0,spanid='',len=0;
            var schoolId = localStorage.getItem('schoolId');
            var TeacherId = sessionStorage.getItem('TeacherId');
            pertarsk.publisherId=localStorage.getItem('publisherId');
            pertarsk.publisherName = localStorage.getItem('publisherName');
            var accountName=sessionStorage.getItem('accountName');
            var Pgradeid = sessionStorage.getItem("Pgradeid");
            var Pspanid = sessionStorage.getItem("Pspanid");
            var PclassName=sessionStorage.getItem('PclassName');
            var PgradeName = sessionStorage.getItem('PgradeName');
            var Pterms = sessionStorage.getItem('Pterms');
            var PgradeShowName=sessionStorage.getItem("PgradeShowName");
            var Punits=sessionStorage.getItem('Punits');
            if(Pgradeid){
                param.Unit=Punits;
                param.Grade=PgradeName;
                if(Pterms=='0'){
                    param.Term="上学期";
                }else if(Pterms=='1'){
                    param.Term="下学期";

                }
                pertarsk.ClassId=Pspanid;
                srtudent.ClassId=Pspanid;
                getStudent();
            }
            pertarsk.schoolId=schoolId;
            pertarsk.TeacherId=accountName;
            var classListId=[],gradeid='',gradeName='';//班级id列表
           $(".release").on("click",function () {
                pertarsk.doQuestions  = $("#selectTime").val();
                pertarsk.classIdList   = studentArr;
                pertarsk.gradeId = gradeid;
           
                pertarsk.questionList =questionList;
                if(pertarsk.questionList.length!=0){
                    var data=C.POSTS(JSON.stringify(pertarsk),httpUrl.SendPersonalTask,successSend);
                }else{
                    C.layer(2,"请选择篇章！");
                }
                
                
            });
           function successSend(data){
                if(data.Result==1){
                    C.comfig("发送成功！",'check');
                    // location.reload();
                }else{
                    C.layer(1,data.Message);
                }
            }
             //获取学生信息
             var studentCount='';
             var stuNum=0;
             function getStudent(){
                 var studentData=C.POST(srtudent,httpUrl.GetStudentsListByClassID,successGetstu);
                 
                 
             }
            function successGetstu(studentData){
                if(studentData.Result==1){
                    
                    $(".classcount").text(srtudent.IndexPage);
                    if(studentData.Data!=null){
                        studentList(studentData.Data);
                    }
                    

                    if(studentData.Count%srtudent.IndexSize>0){
                        studentCount=parseInt(studentData.Count/srtudent.IndexSize)+1;
                    }else{
                        studentCount=parseInt(studentData.Count/srtudent.IndexSize);
                    }
                 }else{
                    srtudent.IndexPage-=stuNum;
                    C.layer(1,studentData.Message);
                 }
            }
            function studentList(data){

                var htmls='';
                for(var i=0;i<data.length;i++){

                    htmls+='<li><input type="checkbox" id='+data[i].StudentId+' name="selectstu" ><span>'+data[i].StudentName+'</span></li>'
                }
                $('.stuSec').html(htmls);
            }
            var studentArr=[];
            
            $(".stuSec").on("click","input",function(){
                var bools=$(this).is(":checked");
                var bgId=$(this).attr('id');
                if(bools){
                    studentArr.push(bgId);
                }else{
                    var len=studentArr.indexOf(bgId);
                    studentArr.splice(len,1);
                }
                var lens=studentArr.length;
                $('.selectstuNum').val('您选择了'+lens+'个学生！');
            });
            $(".stuleft").on("click",function(){
                C.leftPage(srtudent,stuNum,getStudent);
               
            });
            $(".sturight").on("click",function(){
                C.rightPage(srtudent,stuNum,studentCount,getStudent);
                
            });
             //获取班级数据
            var accountName=sessionStorage.getItem('accountName');
            paramClass.TeacherId=accountName;
             getClassData();
             var classnum=0,classCount=0;
             function getClassData(){
                var classData=C.POST(paramClass,httpUrl.GetClassListByTeacherID,successGetClass);
                
                
            }
            function successGetClass(classData){
                $(".sec").empty();
                if(classData.Result==1){
                     
                    $(".classcount").text(paramClass.IndexPage);
                    createClassList(classData.Data);
                
                }else{
                    paramClass.IndexPage-=classnum;
                    C.layer(1,classData.Message);
                }
            }
            function createClassList(data){
                var list='';
                for(var i=0;i<data.length;i++){
                    if(data[i].IsAfterSchool){
                        xiaowai="(校外)";
                    }else{
                        xiaowai="";
                    }
                    if(Pspanid == data[i].Id){
                        list+='<li><input type="radio" id='+data[i].Id+' name="seleclasses" dataName='+data[i].Name+' gradeid='+data[i].GradeId+' checked><span>'+data[i].Name+xiaowai+'</span></li>';
                    }else{
                        list+='<li><input type="radio" id='+data[i].Id+' name="seleclasses" dataName='+data[i].Name+' gradeid='+data[i].GradeId+'><span>'+data[i].Name+xiaowai+'</span></li>';
                    }
                    
                }
                if(PclassName){
                    $('.selectNum').val(PclassName);
                    Semester(Pgradeid);
                }
                $(".classSec").html(list);

            }
           
            $('.classSec').on('click','input',function(){
                classListId=[];
                var checkFool=$(this).is(':checked');
                spanid=$(this).attr('id');
                gradeid=$(this).attr('gradeid');
                sessionStorage.setItem("Pgradeid",gradeid);
                sessionStorage.setItem("Pspanid",spanid);
                sessionStorage.setItem('PclassName',$(this).attr('dataName'));
                Semester(gradeid);
                $('.selectNum').val($(this).attr('dataName'));
        
            });
            $('.mask_sure').on('click',function(){
                var tarskBool=$('.tarskSetName').css('display');
                var bools=$('.classSec').css('display');
                var v=$('.tarskSetName').find('input').val();
                
                if(tarskBool == 'inline' || tarskBool == "block"){
                    if(v.length >0){
                        $(".tarskName").find('input').val(v);
                        pertarsk.Name=v;
                    }
                    
                }
               
                if(bools=='block' || bools=='inline'){
                    param.IndexPage=1;
                    console.log();
                    srtudent.ClassId=spanid;
                    pertarsk.ClassId=spanid;
                    if(srtudent.ClassId!=''){
                        getStudent();//获取学生列表
                    }else{
                        C.layer(3,"请选择班级！");
                    }
                    if(len==0){
                        $('.stusline').empty();
                    }
                }

            });
            $('body').on('click','#xxclTitle,#jxgyTitle,#bjzsTitle,#jxjyTitle,#swjcTitle,#yfzjTitle，#zyTitle,#yfzjTitle,#zyTitle',function(){
                
                C.toggleImg(this);
            });
            //学期列表
            function Semester(id){
                var htmls='';
                switch(id)
                {
                case '7':
                    htmls='<li><input type="radio" name="semester" dataName="七年级上" value="七年级" data-id="0">七年级上</li>';
                    htmls+='<li><input type="radio" dataName="七年级下" name="semester" value="七年级" data-id="1">七年级下</li>';
                    break;
                case '8':
                    htmls='<li><input type="radio" name="semester" dataName="八年级上" value="八年级" data-id="0">八年级上</li>';
                    htmls+='<li><input type="radio" name="semester" dataName="八年级下" value="八年级" data-id="1">八年级下</li>';
                    break;
                case '9':
                    htmls='<li><input type="radio" name="semester" dataName="九年级上" value="九年级" data-id="0">九年级上</li>';
                    htmls+='<li><input type="radio" name="semester" dataName="九年级下" value="九年级" data-id="1">九年级下</li>';
                    break;
                case '10':
                    htmls='<li><input type="radio" name="semester"  dataName="高一上" value="高一" data-id="0">高一上</li>';
                    htmls+='<li><input type="radio" name="semester"  dataName="高一下" value="高一" data-id="1">高一下</li>';
                    break;
                case '11':
                    htmls='<li><input type="radio" name="semester" value="高二"  dataName="高二上"data-id="0">高二上</li>';
                    htmls+='<li><input type="radio" name="semester" dataName="高二下" value="高二" data-id="1">高二下</li>';
                    break;
                case '12':
                    htmls='<li><input type="radio" name="semester" value="高三"  dataName="高三上"data-id="0">高三上</li>';
                    htmls+='<li><input type="radio" name="semester" dataName="高三下" value="高三" data-id="1">高三下</li>';
                    break;
                default:
                    htmls='没有这个年级';
                    break;
                }
                $(".semester").html(htmls);
                if(Pterms){
                    $('.semester').find('li').eq(Pterms).find('input').attr('checked',true);
                    $('.selSemester ').text(PgradeShowName);
                    param.Grade=PgradeName;
                    if(Pterms=='0'){
                        param.Term="上学期";
                    }else if(Pterms=='1'){
                        param.Term="下学期";

                    }
                    getunitData(param.Grade,param.Term)
                }
            }
             //页面自适应
             
            $(window).resize(function () {  
                C.resezes();
            });
            C.resezes(1);
           
            
            var count=1;
            $(".ope_first").on({
                mouseover:function (e) {
                    e.stopPropagation();
                    $(".message_list").show();
                },
                mouseout:function (e) {
                    e.stopPropagation();
                    $(".message_list").hide();
                }
            });
            // 左翻页
            var tablenum=0;
            $(".left_btn").on("click",function(){
                var nums=parseInt($('.count').text());
                if(param.IndexPage!=nums){
                    param.IndexPage=nums;
                }
                C.leftPage(param,tablenum,getdata);
             
            });
            $(".right_btn").on("click",function(){
                var nums=$('.count').text();
                if(param.IndexPage!=nums){
                    param.IndexPage=parseInt(nums);
                }
                C.rightPage(param,tablenum,count,getdata);
                
            });
           
            //跳转页面
            $('.skipBtn').on('click',function () {
                var num=$('.skip').find('input').val();
                // if(){}
                param.IndexPage=num;
                getdata();
            });
           
             //获取篇章列表数据
            function getdata(){
                
                var tableData=C.POST(param,httpUrl.GetArticleList,successGetdata);
                
            }
            function successGetdata(tableData){
                if(tableData.Result==1){
                    
                    $(".count").text(param.IndexPage);
                    if(tableData.Count%param.IndexSize>0){
                        count=parseInt(tableData.Count/param.IndexSize)+1;
                    }else{
                        count=parseInt(tableData.Count/param.IndexSize);
                    }
                    $('.allcount').find('span').text(count);
                    createList(tableData.Data);
                    setChecked();
                }else{
                    param.IndexPage-=tablenum;
                    C.layer(1,tableData.Message);
                }
            }
            function createList(data){
                var list='<li><p class="cell1">编号</p><p class="cell2">选中</p><p class="cell3">篇章名称</p><p class="cell4">话题</p><p class="cell5">题型</p><p class="cell6">文体</p><p class="cell7">难度</p><p class="cell8">阅读策略</p><p class="cell10">词数</p><p class="cell11">分数</p><p class="cell12">操作</p></li>';
                for(var i=0;i<data.length;i++){
                    var index=1;
                    
                    index=(param.IndexPage-1)*param.IndexSize+i+1;
            
                    if(i<data.length-1){
                        list+='<li class="trline"  style="border-bottom:1px solid #999">';
                    }else{
                        list+='<li class="trline">';
                    }
                    list+='<p class="cell1"> <span class="serial">'+index+'</span> </p>';
                        list+='<p class="cell2"><label class="che"><input id='+data[i].Id+' type="checkbox" class="input_che" ><span></span></label></p>';
                        list+='<p class="chapter cell3" title="'+data[i].Name+'" style="text-align:left">'+data[i].Name+'</p>';
                        list+='<p class="cell4" title="'+data[i].Topic+'">'+data[i].Topic+'</p>';
                        list+='<p class="cell5" title="'+data[i].QuestionsType+'">'+data[i].QuestionsType+'</p>';
                        list+='<p class="cell6">'+data[i].LiteraryForm+'</p>';
                        list+='<p class="cell7">'+data[i].Difficulty+'</p>';
                        if(data[i].JiaoCanId){
                            list+='<p class="cell8">精读</p>';
                        }else{
                            list+='<p class="cell8">泛读</p>';
                        }
                        list+='<p class="cell10">'+data[i].Words+'</p>';
                        list+='<p class="cell11">'+data[i].Score+'</p>';
                       
                        if(data[i].JiaoCanId){
                            list+='<p class="cell12"><span class="view dbtn" data-id="' + data[i].Id + '" >教参预览</span></p>';
                        }else{
                            list+='<p class="cell12"><span class="view dbtn" data-id="' + data[i].Id + '" >预览</span></p>';
                        }
                         // list+='<p class="cell13"><span class="preview dbtn">查看</span></p>';
                        list+='</li>';
                }
                $(".tablelist").html(list);
            }
            var checkedIds= [];//保存选中的id，亦适用于分页
            var questionList =[];//保存篇章列表信息
            //点击input选中篇章列表
            $(".tablelist").on("click",'input',function(){
                if( $('.selSemester ').text()!='未选择'){
                    if($(this).is(":checked")){
                   
                        if(questionList.length>=5){
                            
                            C.layer(2,"最多选择5条信息！");
                            return false;
                        }else{
                            checkedIds.push($(this).attr("id"));
                            var quesLen=checkedIds.length-1;
                            questionList.push({});
                            questionList[quesLen].id = $(this).attr("id");
                            questionList[quesLen].score  = $(this).parents('.trline').find('.cell11').text();
                            questionList[quesLen].writingSkillId  = $(this).parents('.trline').find('.cell9').text();
                            questionList[quesLen].Term=terms;
                            questionList[quesLen].Unit=units;
                        }
                         
                     }else{
                         for(var i=0; i<checkedIds.length; i++){
                             if($(this).attr("id") == checkedIds[i]){
                             checkedIds.splice(i, 1);
                             questionList.splice(i,1);
                             break;
                             }
                         }
                     }
                }else{
                    
                    C.layer(2,"请先选择班级和学期");
                    return false;
                }
            });
            //翻页后设置是否选中
            function setChecked(){
                
               var $boxes = $(".tablelist input");
               for(var i=0;i<$boxes.length;i++){
                   var id = $boxes[i].id;
                   if(checkedIds.indexOf(id,0)!=-1){
                       $boxes[i].checked = true;
                       
                   }else{
                       $boxes[i].checked = false;
                   }
               }
               var arr=$('input[type=checkbox]:checked');
            }
             // 时间弹出层
            $(".mask_sure , .close_list").on("click",function(){
                $('.mask').hide();
                $('.mask').find("ul").hide();
                $('.listTimes').hide();
                $('.tarskSetName').hide();
            });
            //完成时间选择
            $(".listTimes,.semester,.unit,.classSec").on("click",function(e){
                e.stopPropagation();
            });
            $(".listTimes input").on("change",function(){
                var v=$(this).val();
                $(".chofirTime").text(v);
                pertarsk.limitedTime=parseInt(v);
            });
            $(".chofir").on("click",function(){
                $(".mask").show();
                $(".listTimes").show();
            });
            //任务名称
            $('.tarskName').on('click',function () {
                $(".mask").show();
                $(".tarskSetName").show();
            });
            //班级选择
            $('.seleclasses').on('click',function(){
                $(".mask").show();
                $(".classSec").show();
            });
            //选择学生
            $('.seletstu').on('click',function () {
                $(".mask").show();
                $(".stuSec").show();
            });
            //学期选择
            $(".cholast").on("click",function(){
                
                if($('.selectNum').text()!='未选择'){
                    $(".mask").show();
                    $(".semester").show();

                }else{
                    
                    C.layer(2,"请先选择班级");
                    return false;
                }
            });
            var terms='';
            $(".semester").on("click",'input',function(){
                gradeName=$(this).val();
                var v=$(this).attr('dataName');
                $(".selSemester").text(v);
                
                terms=$(this).val();

                var Term = $(this).attr('data-id');
                sessionStorage.setItem("PgradeShowName",v);
                sessionStorage.setItem('PgradeName',gradeName);
                sessionStorage.setItem('Pterms',Term);
                param.Grade=gradeName;
                if(Term=='0'){
                    param.Term="上学期";
                }else if(Term=='1'){
                    param.Term="下学期";

                }
                getunitData(param.Grade,param.Term)
                getdata();
            });
            //年级选择

            $(".chosec2").on("click",function(){
                if($('.selSemester').text()!='未选择'){
                    $(".unit").show();
                    $(".mask").show();
                }else{
                    
                    C.layer(2,"请先选择学期！");
                }
            });
            var units='';
            $(".unit").on("click",'input',function(){
                var v=$(this).val();
                units=v;
                $(".selUnit").text(v);
                param.Unit=v;
                sessionStorage.setItem('Punits',v);
                getdata();
            });
            //单元选择
            function getunitData(Grade,Term){
                var unitdata={
                    'Grade':Grade,
                    'Term':Term,
                    'IndexPage':1,
                    'IndexSize':20
                } 
                var unitDatas=C.POST(unitdata,httpUrl.GetUnitList,unitlist);
                // console.log('unit',unitDatas);
                // if(unitDatas.result==0){
                //     unitlist(unitDatas.data);
                // }
            }
            function unitlist(unitDatas){
                // console.log()
                if(unitDatas.Result==0){

                    var data=unitDatas.Data;
                    var htmls='';
                    for(var i=0;i<data.length;i++){
                        if(Punits == data[i].Unit){
                            htmls+='<li><input type="radio" name="unit" value='+data[i].Unit+' checked>单元'+data[i].Unit+'</li>';
                        }else{
                            htmls+='<li><input type="radio" name="unit" value='+data[i].Unit+' >单元'+data[i].Unit+'</li>';
                        }
                       
                    }
                     $('.unit').html(htmls);
                    if(Punits){
                       
                        $('.selUnit').text(Punits);
                    }
                    
                }else{
                    C.layer(1,unitDatas.Message);
                }
            }
             // 预览
            $(".tablelist").on("click",".view",function(){
                Vparams.Id=$(this).attr('data-id');
                ajaxView();
            });
            function ajaxView(){
               
                 var data=C.POST(Vparams,httpUrl.GetEnglishArticleWithQuestion,PreviewSubject)
                 
            }
            // function successView(data){

            // }
            $(".close").on("click",function(){
                $(".premask").hide();
            });
            $(".task_list").on('click',function(){
                window.location.href="decorate.html";
            });
             //题目预览
            function PreviewSubject(datas) {

                var data=datas.Data;
                if(data.JiaoCanId){
                    var str = TeacherSubjectString(data);
                }else{
                    var str = TeacherSubjectStrings(data);
                }
            
                openPopWin('checkDetail', str);
            }
            //弹出层预览
             function openPopWin(type, content) { //根据传递进来的值，更改str内容

                var pop = document.querySelector("#pop-box");
                var str = "";
                // if (type == "checkDetail") {
                    str = '<div class="pop-win pop-content">\<header class="close-btn-box"></header>\
                        <div class="pop-scroll">\
                            <div class="pop-content">';
                    str += content;
                    str += '</div>\
                        </div>\
                    </div>';
                
                pop.innerHTML = str;

                var box = document.querySelector(".close-btn-box");
                var btn = document.createElement("span");
                var _this = this;
                btn.className = "close-btn";
                btn.addEventListener("click", function () {
                    $(pop).find(".pop-content").hide("slow", function () {
                        pop.innerHTML = "";
                    });
                });
                box.appendChild(btn);
            }
            $(".task_list").on('click',function(){
                window.location.href="person_detail.html";
            });
            getdata();
            $(".ope_first").on({
                mouseover:function (e) {
                    e.stopPropagation();
                    $(".message_list").show();
                },
                mouseout:function (e) {
                    e.stopPropagation();
                    $(".message_list").hide();
                }
            });
    	});
    </script>
</body>
</html>